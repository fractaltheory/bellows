/*! bellows 2.0.0 2014-07-24 */
(function(t){"function"==typeof define&&define.amd?define(["selectorEngine","velocity","zappy"],t):t(window.Zepto||window.jQuery)})(function(t){function e(t,e){this._init(t,e)}var i="bellows",o=function(){},n="bellows__item",s="bellows--is-open",l="bellows--is-opening",r="bellows--is-closing",a={ITEM_HEADER:"> .bellows__item > .bellows__header",ITEM_CONTENT_WRAPPER:"> .bellows__content-wrapper",ITEM_CONTENT:"> .bellows__item > .bellows__content"};return e.VERSION="2.0.0",e.DEFAULTS={singleItemOpen:!1,event:"tap",duration:200,easing:"swing",open:o,opening:o,opened:o,afterOpen:o,close:o,closing:o,closed:o,afterClose:o},e.prototype._init=function(i,o){this.options=t.extend(!0,{},e.DEFAULTS,o),this.$bellows=t(i),this.$bellows.find(a.ITEM_CONTENT).wrap('<div class="bellows__content-wrapper" />').parents(".bellows__item:not(.bellows--is-open)").find(".bellows__content-wrapper").attr("aria-hidden",!0),this._bindEvents()},e.prototype._bindEvents=function(){var e=this;this.$bellows.find(a.ITEM_HEADER).bind(this.options.event,function(i){i.preventDefault(),e.toggle(t(this).parent())})},e.prototype._getHeight=function(e){return parseFloat(t.Velocity.CSS.getPropertyValue(e[0],"height"))},e.prototype._setHeight=function(t){this.$bellows.css("height",t||"")},e.prototype._item=function(t){return"number"==typeof t&&(t=this.$bellows.find("."+n).eq(t)),t},e.prototype._trigger=function(e,o){e in this.options&&this.options[e].call(this,t.Event(i+":"+e,{bubbles:!1}),o)},e.prototype.toggle=function(t){t=this._item(t),this[t.hasClass(s)?"close":"open"](t)},e.prototype.open=function(e){if(e=this._item(e),!e.hasClass(s)){var i=this,o=e.find(a.ITEM_CONTENT_WRAPPER);this.options.singleItemOpen&&this.$bellows.find("."+s).each(function(){i.close(t(this))}),this._trigger("open",{item:e}),o.velocity("slideDown",{begin:function(){i._setHeight(i._getHeight(i.$bellows)+i._getHeight(o)),e.addClass(l),i._trigger("opening",{item:e})},duration:this.options.duration,easing:this.options.easing,complete:function(){e.removeClass(l).addClass(s).attr("aria-hidden",!0),i._setHeight(),i._trigger("opened",{item:e})}}),this._trigger("afterOpen",{item:e})}},e.prototype.close=function(t){if(t=this._item(t),t.hasClass(s)){var e=this,i=t.find(a.ITEM_CONTENT_WRAPPER);this._trigger("close",{item:t}),i.velocity("slideUp",{begin:function(){e._setHeight(e._getHeight(e.$bellows)),t.removeClass(s).addClass(r),e._trigger("closing",{item:t})},duration:this.options.duration,easing:this.options.easing,complete:function(){t.removeClass(r).removeAttr("aria-hidden"),e._setHeight(),e._trigger("closed",{item:t})}}),this._trigger("afterClose",{item:t})}},t.fn.bellows=function(o){var n=Array.prototype.slice.call(arguments);return this.each(function(){var s=t(this),l=s.data(i),r="string"==typeof o;if(!l){if(r)throw'cannot call methods on bellows prior to initialization; attempted to call method "'+o+'"';s.data(i,l=new e(this,o))}if(r){if("_"===o.charAt(0)||"function"!=typeof l[o])throw'no such method "'+o+'" for bellows';l[o].apply(l,n.length>1?n.slice(1):null)}})},t.fn.bellows.Constructor=e,t("[data-bellows]").bellows(),t});